import{D as e,y as t,E as s,G as o,s as a}from"./index-49aa9fa8.js";const i={invoke(e){var s;e.url.startsWith("http")||(e.url="http://localhost:8090/uni-app"+e.url),e.timeout=1e4,e.header={...e.header,"source-client":"miniapp"};const o=null==(s=t().profile)?void 0:s.token;o&&(e.header.Authorization=o)}};e("request",i),e("uploadFile",i);const l=e=>new Promise(((i,l)=>{s({...e,success(e){if(e.statusCode>=200&&e.statusCode<300)i(e.data);else if(401===e.statusCode){t().clearProfile(),o({url:"/pages/login/login"}),l(e)}else a({icon:"none",title:e.data.msg||"请求错误"}),l(e)},fail(e){a({icon:"none",title:"网络错误，换个网络试试"}),l(e)}})}));export{l as h};
