import{d as s,H as e,l as a,m as t,o as l,c as o,w as u,i,a as r,f as c,r as n,F as d,h as p,s as m,b as g,t as f,I as v,J as y,x as _,e as h,j as b,p as I}from"./index-Ce7NpXT2.js";import{h as w}from"./http.Ul2bHQh5.js";import{_ as x}from"./plugin-vueexport-helper.BZoC6RvN.js";const k=(s,e)=>w({method:"GET",url:s,data:e}),j=x(s({__name:"hot",props:{type:{}},setup(s){const w=s,x=[{type:"1",title:"特惠推荐",url:"/hot/preference"},{type:"2",title:"爆款推荐",url:"/hot/inVogue"},{type:"3",title:"一站买全",url:"/hot/oneStop"},{type:"4",title:"新鲜好物",url:"/hot/new"}].find((s=>s.type===w.type));e({title:x.title});const j=a(""),S=a([]),T=a(0);t((()=>{(async()=>{const s=await k(x.url);j.value=s.result.bannerPicture,S.value=s.result.subTypes})()}));const z=async()=>{const s=S.value[T.value];if(!(s.goodsItems.page<s.goodsItems.pages))return s.finish=!0,void _({icon:"none",title:"没有更多数据~"});s.goodsItems.page++;const e=(await k(x.url,{subType:s.id,page:s.goodsItems.page,pageSize:s.goodsItems.pageSize})).result.subTypes[T.value];s.goodsItems.items.push(...e.goodsItems.items)};return(s,e)=>{const a=p,t=i,_=h,w=b,x=I;return l(),o(t,{class:"viewport"},{default:u((()=>[r(t,{class:"cover"},{default:u((()=>[r(a,{src:j.value},null,8,["src"])])),_:1}),r(t,{class:"tabs"},{default:u((()=>[(l(!0),c(d,null,n(S.value,((s,e)=>(l(),o(_,{key:s.id,class:m(["text",{active:e===T.value}]),onClick:s=>T.value=e},{default:u((()=>[g(f(s.title),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),(l(!0),c(d,null,n(S.value,((s,e)=>v((l(),o(x,{"scroll-y":"",key:s.id,class:"scroll-view",onScrolltolower:z},{default:u((()=>[r(t,{class:"goods"},{default:u((()=>[(l(!0),c(d,null,n(s.goodsItems.items,(s=>(l(),o(w,{key:s.id,url:`/pages/goods/goods?id=${s.id}`,"hover-class":"none",class:"navigator"},{default:u((()=>[r(a,{src:s.picture,class:"thumb"},null,8,["src"]),r(t,{class:"name ellipsis"},{default:u((()=>[g(f(s.name),1)])),_:2},1024),r(t,{class:"price"},{default:u((()=>[r(_,{class:"symbol"},{default:u((()=>[g("¥")])),_:1}),r(_,{class:"number"},{default:u((()=>[g(f(s.price),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["url"])))),128))])),_:2},1024),r(t,{class:"loading-text"},{default:u((()=>[g(f(S.value[T.value].finish?"没有更多数据~":"正在加载..."),1)])),_:1})])),_:2},1024)),[[y,T.value===e]]))),128))])),_:1})}}}),[["__scopeId","data-v-5d9b6669"]]);export{j as default};
